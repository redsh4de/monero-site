---
import { getMoneropediaEntries, processMoneropediaLinks } from "@/utils/moneropedia";
import { defaultLocale } from "@/i18n/config";
import DOMPurify from "isomorphic-dompurify";
import "@/styles/moneropedia-link.css";

interface Props {
  locale: string;
}

const { locale } = Astro.props as Props;

const entries = await getMoneropediaEntries(locale);

// Get slot content and process it
let processedHtml = await Astro.slots.render("default");
processedHtml = processMoneropediaLinks(processedHtml, entries, locale, defaultLocale);
---

<div class="moneropedia-content" set:html={DOMPurify.sanitize(processedHtml)} />

<style>
  .moneropedia-content {
    position: relative;
  }
</style>
