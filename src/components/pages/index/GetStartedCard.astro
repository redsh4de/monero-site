---
import Icon from "../../ui/Icon.astro";
import arrowLeft from "../../../assets/icons/arrow-left.avif?url";
import { localizeHref } from "@/i18n/utils";
import { getLocale } from "astro-i18n-aut";

export interface Props {
  step: string | number;
  title: string;
  description?: string;
  ctaHref?: string;
  ctaLabel?: string;
  as?: keyof HTMLElementTagNameMap;
}

const {
  step,
  title,
  description = "",
  ctaHref = "#",
  ctaLabel = "Get a wallet",
  as = "section",
} = Astro.props;

const Tag = as as any;
const locale = getLocale(Astro.url);
---

<Tag class="gs" aria-labelledby="gs-title">
  <div class="num" aria-hidden="true">{String(step).padStart(2, "0")}</div>

  <div class="text">
    <h3 id="gs-title" class="title">{title}</h3>
    {description && <p class="desc">{description}</p>}
    <a class="cta" href={localizeHref(locale, ctaHref)}>
      {ctaLabel}
      <Icon src={arrowLeft} />
    </a>
  </div>
</Tag>

<style>
  :root {
    --num-color: var(--monero-orange);
  }

  @media (prefers-color-scheme: dark) {
    :root {
      --num-color: var(--border-color);
    }
  }
  .gs {
    display: flex;
    align-items: center;
    gap: 2rem;
    padding: 1.5rem 0;
  }

  .num {
    font-weight: 800;
    font-size: 6.5rem;
    line-height: 1;
    color: var(--num-color);
    width: 2ch;
  }

  .text {
    flex: 1;
  }

  .title {
    margin: 0 0 0.5rem;
    font-weight: var(--font-weight-extra-bold);
    font-size: 1.75rem;
    color: var(--heading-color);
  }

  .desc {
    margin: 0 0 1rem;
    color: var(--paragraph-subtitle);
    max-width: 60ch;
    line-height: var(--line-height-body);
  }

  .cta {
    display: inline-flex;
    align-items: center;
    gap: 0.375rem;
    font-weight: var(--font-weight-bold);
    color: var(--monero-orange);
    text-decoration: none;
  }

  .cta:hover {
    text-decoration: underline;
  }

  .arrow {
    width: 1rem;
    height: 1rem;
  }

  @media (max-width: 640px) {
    .gs {
      flex-direction: column;
      align-items: flex-start;
      gap: 1.25rem;
    }
    .num {
      font-size: 4.5rem;
    }
    .title {
      font-size: 1.4rem;
    }
  }
</style>
